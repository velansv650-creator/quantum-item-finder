<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quantum Item Finder</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<style>
body{
  margin:0;
  font-family:"Segoe UI",sans-serif;
  background:linear-gradient(135deg,#1e3c72,#2a5298);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}
.card{
  background:#fff;
  width:95%;
  max-width:440px;
  border-radius:16px;
  padding:20px;
  box-shadow:0 15px 40px rgba(0,0,0,.3);
}
h2{text-align:center}
select,input,button{
  width:100%;
  padding:12px;
  margin-top:10px;
  border-radius:10px;
  border:1px solid #ccc;
  font-size:15px;
}
button{border:none;cursor:pointer}
.primary{background:#3f6ae1;color:#fff}
.green{background:#2e7d32;color:#fff}
.gray{background:#eee}
.shop{
  background:#f7f7f7;
  padding:12px;
  border-radius:12px;
  margin-top:15px
}
.center{text-align:center}
</style>
</head>

<body>
<div class="card">

<!-- LOGIN -->
<div id="login">
<h2>üîê Login / Signup</h2>
<input placeholder="Email">
<input type="password" placeholder="Password">
<button class="primary" onclick="login()">Continue</button>
</div>

<!-- APP -->
<div id="app" style="display:none">
<h2>üîç Item Search</h2>

<select id="category" onchange="loadItems()">
<option value="">Select Category</option>
<option>Grocery</option>
<option>Medical</option>
<option>Electronics</option>
<option>Stationery</option>
<option>Bakery</option>
<option>Dairy</option>
<option>Hardware</option>
</select>

<select id="item">
<option>Select Item</option>
</select>

<select id="area">
<option>Velachery</option><option>Adyar</option><option>T Nagar</option>
<option>Guindy</option><option>Anna Nagar</option><option>Tambaram</option>
<option>Chromepet</option><option>Pallavaram</option><option>Medavakkam</option>
<option>Sholinganallur</option><option>OMR</option><option>ECR</option>
<option>Perungudi</option><option>Porur</option><option>Ambattur</option>
<option>Avadi</option><option>Madipakkam</option><option>Nanganallur</option>
<option>Triplicane</option><option>Mylapore</option><option>Royapettah</option>
<option>Vadapalani</option><option>Kodambakkam</option>
<option>Perambur</option><option>Kolathur</option>
<option>Redhills</option><option>Poonamallee</option>
<option>Thiruvallur</option><option>Sriperumbudur</option>
<option>Oragadam</option><option>Guduvanchery</option>
<option>Urapakkam</option><option>Vandalur</option>
<option>Kelambakkam</option><option>Chengalpattu</option>
</select>

<button class="primary" onclick="nearMe()">üìç Near Me</button>
<button class="primary" onclick="search()">Search</button>
<button class="gray" onclick="logout()">Logout</button>

<div id="result"></div>
</div>
</div>

<script>
/* ---------- DATA ---------- */
const itemsData={
Grocery:["Rice","Wheat","Sugar","Salt","Oil","Dal","Flour","Spices","Biscuits"],
Medical:["Paracetamol","Crocin","Vicks","ORS","Thermometer","Bandage","Dettol"],
Electronics:["Mobile","Charger","Power Bank","Earphones","Extension Box"],
Stationery:["Pen","Pencil","Notebook","Bag","Marker","Eraser"],
Bakery:["Bread","Cake","Buns","Cookies"],
Dairy:["Milk","Curd","Butter","Cheese"],
Hardware:["Hammer","Screwdriver","Nails","Drill","Pipe"]
};

const shopsByArea={
Velachery:[
{name:"Sri Medicals",trust:4.6,phone:"9876543210",open:true},
{name:"Green Grocery",trust:4.3,phone:"9876543211",open:true},
{name:"City Pharmacy",trust:4.1,phone:"9876543212",open:false}
],
Tambaram:[
{name:"Apollo Pharmacy",trust:4.7,phone:"9876543220",open:true},
{name:"Daily Needs Store",trust:4.2,phone:"9876543221",open:true}
],
Anna Nagar:[
{name:"Health Plus",trust:4.5,phone:"9876543230",open:true},
{name:"Fresh Mart",trust:4.4,phone:"9876543231",open:true}
]
};

/* ---------- AUTH ---------- */
function login(){
login.style.display="none";
app.style.display="block";
}
function logout(){location.reload();}

/* ---------- LOAD ITEMS ---------- */
function loadItems(){
item.innerHTML="<option>Select Item</option>";
(itemsData[category.value]||[]).forEach(i=>{
item.innerHTML+=`<option>${i}</option>`;
});
}

let booking={};

/* ---------- SEARCH ---------- */
function search(){
booking={
id:"BOOK"+Math.floor(Math.random()*100000),
item:item.value,
area:area.value
};

const shops=shopsByArea[area.value]||[];

if(shops.length===0){
result.innerHTML="<p>No shops found in this area</p>";
return;
}

let html="";
shops.forEach(s=>{
html+=`
<div class="shop">
<b>${s.name}</b><br>
‚≠ê Trust: ${s.trust}<br>
Status: ${s.open?"üü¢ Open":"üî¥ Closed"}<br><br>

<button class="primary" onclick="preBook()">Pre-Book</button>
<button class="green" onclick="callShop('${s.phone}')">üìû Call</button>
<button class="green" onclick="waShop('${s.phone}')">üí¨ WhatsApp</button>
<button class="green" onclick="map()">üìç Map</button>

<div id="qr" class="center"></div>
</div>`;
});

result.innerHTML=html;
}

/* ---------- PRE BOOK ---------- */
function preBook(){
alert("Booking Confirmed: "+booking.id);
qr.innerHTML="";
new QRCode(qr,{text:JSON.stringify(booking),width:160,height:160});
}

/* ---------- ACTIONS ---------- */
function callShop(num){location.href="tel:+91"+num;}
function waShop(num){
window.open(`https://wa.me/91${num}?text=Booking ${booking.id} - ${booking.item}`);
}
function map(){
window.open(`https://www.google.com/maps/search/${booking.area}+shop`);
}
function nearMe(){
alert("üìç Near Me detected: Velachery");
area.value="Velachery";
}
</script>

</body>
</html>
