<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Quantum Item Finder</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>

<style>
body{
  margin:0;
  font-family:Poppins,sans-serif;
  background:linear-gradient(135deg,#f3f4f6,#e5e7eb);
}
.card{
  max-width:430px;
  margin:30px auto;
  background:#fff;
  padding:22px;
  border-radius:18px;
  box-shadow:0 18px 40px rgba(0,0,0,.15);
}
h2{
  text-align:center;
  color:#1B5E20;
}
.user{
  text-align:center;
  font-size:14px;
  margin-bottom:12px;
}
select,input{
  width:100%;
  padding:14px;
  margin-bottom:12px;
  border-radius:10px;
  border:1px solid #ddd;
}
button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:12px;
  font-size:15px;
  font-weight:600;
  margin-bottom:10px;
  cursor:pointer;
}
.primary{
  background:linear-gradient(135deg,#1B5E20,#2E7D32);
  color:#fff;
}
.gold{
  background:linear-gradient(135deg,#C9A227,#E6C75A);
}
.red{
  background:#B71C1C;
  color:#fff;
}
.shop{
  background:#f9fafb;
  padding:14px;
  border-radius:14px;
  margin-top:12px;
  border-left:5px solid #1B5E20;
}
.shop b{color:#1B5E20;}
.actions button{
  width:32%;
  font-size:13px;
  padding:10px;
}
.hide{display:none;}
</style>
</head>

<body>

<!-- LOGIN -->
<div class="card" id="loginBox">
  <h2>ğŸ” Login / Signup</h2>
  <input type="email" id="email" placeholder="Email">
  <input type="password" id="password" placeholder="Password">
  <button class="primary" onclick="signup()">Signup</button>
  <button class="gold" onclick="login()">Login</button>
  <div id="msg"></div>
</div>

<!-- APP -->
<div class="card hide" id="appBox">
  <h2>ğŸ” Quantum Item Finder</h2>
  <div class="user" id="userEmail"></div>

  <!-- AREA SELECT -->
  <select id="area">
    <option value="">ğŸ“ Select Area</option>
    <option>Anna Nagar</option>
    <option>T Nagar</option>
    <option>Velachery</option>
    <option>Adyar</option>
  </select>

  <!-- ITEM SEARCH -->
  <input type="text" id="item" placeholder="Search item (rice, tablet, charger)">
  <button class="primary" onclick="search()">Search</button>

  <div id="result"></div>

  <button class="red" onclick="logout()">Logout</button>
</div>

<script>
// ğŸ”¥ Firebase
firebase.initializeApp({
  apiKey:"AIzaSyCCMTtL8uO4apuVk-Ut-LzPWCMOtQgoAvE",
  authDomain:"quantum-item-finder.firebaseapp.com",
});
const auth=firebase.auth();

// ğŸ” AUTH
function signup(){
 auth.createUserWithEmailAndPassword(email.value,password.value)
 .catch(e=>msg.innerHTML=e.message);
}
function login(){
 auth.signInWithEmailAndPassword(email.value,password.value)
 .catch(e=>msg.innerHTML=e.message);
}
function logout(){auth.signOut();}

auth.onAuthStateChanged(u=>{
 if(u){
  loginBox.classList.add("hide");
  appBox.classList.remove("hide");
  userEmail.innerText="User: "+u.email;
 }else{
  loginBox.classList.remove("hide");
  appBox.classList.add("hide");
 }
});

// ğŸª DATA
const shops={
 rice:[
  {name:"Sri Lakshmi Stores",area:"Anna Nagar",phone:"9876543210",map:"https://maps.google.com?q=Anna+Nagar"},
  {name:"Fresh Mart",area:"T Nagar",phone:"9123456780",map:"https://maps.google.com?q=T+Nagar"}
 ],
 charger:[
  {name:"Mobile World",area:"Velachery",phone:"9000001111",map:"https://maps.google.com?q=Velachery"}
 ]
};

// ğŸ” SEARCH
function search(){
 let it=item.value.toLowerCase();
 let ar=area.value;
 let out="";
 if(!shops[it]){
  result.innerHTML="âŒ Item not found";
  return;
 }
 shops[it].forEach(s=>{
  if(!ar || s.area===ar){
   out+=`
   <div class="shop">
    <b>${s.name}</b><br>
    ğŸ“ ${s.area}<br>
    <div class="actions">
     <button onclick="window.open('${s.map}')">ğŸ—º Map</button>
     <button onclick="location.href='tel:${s.phone}'">ğŸ“ Call</button>
     <button onclick="alert('Pre-Booked successfully')">ğŸ“¦ Pre-Book</button>
    </div>
   </div>`;
  }
 });
 result.innerHTML=out || "âŒ No shops in this area";
}
</script>

</body>
</html>
