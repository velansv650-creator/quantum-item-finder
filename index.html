<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Quantum Item Finder ‚Äì Secure Login</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    .box {
      background: #fff;
      padding: 20px;
      width: 100%;
      max-width: 380px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,.1);
    }
    h2 {
      text-align: center;
      margin-bottom: 15px;
    }
    input {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    button {
      width: 100%;
      padding: 12px;
      margin-top: 8px;
      border: none;
      border-radius: 6px;
      background: #2e7d32;
      color: white;
      font-size: 16px;
      cursor: pointer;
    }
    button:hover {
      background: #1b5e20;
    }
    .hide {
      display: none;
    }
  </style>
</head>

<body>

<div class="box">
  <h2>üîê Login</h2>

  <!-- EMAIL LOGIN -->
  <input id="email" type="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password">
  <button onclick="emailLogin()">Login / Signup</button>

  <hr>

  <!-- PHONE LOGIN -->
  <input id="phone" placeholder="+91XXXXXXXXXX">
  <div id="recaptcha-container"></div>
  <button onclick="sendOTP()">Send OTP</button>

  <input id="otp" placeholder="Enter OTP">
  <button onclick="verifyOTP()">Verify OTP</button>
</div>

<!-- üî• FIREBASE FULL SETUP -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import {
    getAuth,
    signInWithEmailAndPassword,
    createUserWithEmailAndPassword,
    RecaptchaVerifier,
    signInWithPhoneNumber
  } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

  // üîë YOUR FIREBASE CONFIG
  const firebaseConfig = {
    apiKey: "AIzaSyCCMTtL8uO4apuVk-Ut-LzPWCMOtQgoAvE",
    authDomain: "quantum-item-finder.firebaseapp.com",
    projectId: "quantum-item-finder",
    storageBucket: "quantum-item-finder.appspot.com",
    messagingSenderId: "855232416132",
    appId: "1:855232416132:web:d10e2669d548477c0a75d1"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  // expose globally
  window.auth = auth;
  window.signInWithEmailAndPassword = signInWithEmailAndPassword;
  window.createUserWithEmailAndPassword = createUserWithEmailAndPassword;
  window.RecaptchaVerifier = RecaptchaVerifier;
  window.signInWithPhoneNumber = signInWithPhoneNumber;

  // üîê EMAIL LOGIN / SIGNUP
  window.emailLogin = function () {
    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;

    signInWithEmailAndPassword(auth, email, password)
      .then(() => {
        alert("‚úÖ Email Login Success");
      })
      .catch(() => {
        createUserWithEmailAndPassword(auth, email, password)
          .then(() => alert("‚úÖ Account Created & Logged In"))
          .catch(err => alert(err.message));
      });
  };

  // üîê PHONE OTP
  let confirmationResult;

  window.onload = () => {
    window.recaptchaVerifier = new RecaptchaVerifier(
      'recaptcha-container',
      { size: 'invisible' },
      auth
    );
  };

  window.sendOTP = function () {
    const phone = document.getElementById("phone").value;
    signInWithPhoneNumber(auth, phone, window.recaptchaVerifier)
      .then(result => {
        confirmationResult = result;
        alert("üì® OTP Sent");
      })
      .catch(err => alert(err.message));
  };

  window.verifyOTP = function () {
    const otp = document.getElementById("otp").value;
    confirmationResult.confirm(otp)
      .then(() => alert("‚úÖ Phone Login Success"))
      .catch(err => alert(err.message));
  };
</script>

</body>
</html>
