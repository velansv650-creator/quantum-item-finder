<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Quantum Item Finder</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import {
  getAuth,
  createUserWithEmailAndPassword,
  signInWithEmailAndPassword,
  onAuthStateChanged,
  signOut
} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

/* ğŸ” Firebase config */
const firebaseConfig = {
  apiKey: "AIzaSyCCMTtL8uO4apuVk-Ut-LzPWCMOtQgoAvE",
  authDomain: "quantum-item-finder.firebaseapp.com",
  projectId: "quantum-item-finder",
  storageBucket: "quantum-item-finder.appspot.com",
  messagingSenderId: "855232416132",
  appId: "1:855232416132:web:d10e2669d548477c0a75d1"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

/* ğŸ”„ Auth state */
onAuthStateChanged(auth, user => {
  if (user) {
    loginBox.style.display = "none";
    appBox.style.display = "block";
    userEmail.innerText = user.email;
  } else {
    appBox.style.display = "none";
    loginBox.style.display = "block";
  }
});

/* Signup */
window.signup = () => {
  createUserWithEmailAndPassword(auth, email.value, password.value)
    .catch(err => msg.innerText = err.message);
};

/* Login */
window.login = () => {
  signInWithEmailAndPassword(auth, email.value, password.value)
    .catch(err => msg.innerText = err.message);
};

/* Logout */
window.logout = () => signOut(auth);

/* Fake search (demo) */
window.searchItem = () => {
  const q = search.value.trim();
  result.innerHTML = q
    ? `ğŸ” <b>${q}</b> available in nearby shops`
    : "âŒ Enter item name";
};
</script>

<style>
body{margin:0;font-family:Arial;background:#f4f4f4}
.box{max-width:360px;margin:40px auto;background:#fff;padding:25px;border-radius:10px;box-shadow:0 0 10px #0002;text-align:center}
input,button{width:100%;padding:10px;margin-top:10px;font-size:16px}
button{background:#2e7d32;color:#fff;border:none;border-radius:5px}
.logout{background:#c62828}
.search{background:#1565c0}
</style>
</head>

<body>

<!-- ğŸ” LOGIN PAGE -->
<div class="box" id="loginBox">
  <h2>ğŸ” Login / Signup</h2>
  <input id="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password">
  <button onclick="signup()">Signup</button>
  <button onclick="login()">Login</button>
  <p id="msg" style="color:red"></p>
</div>

<!-- ğŸ” APP SEARCH PAGE -->
<div class="box" id="appBox" style="display:none">
  <h2>ğŸ” Quantum Item Finder</h2>
  <p>User: <b id="userEmail"></b></p>

  <input id="search" placeholder="Search item (rice, tablet, charger...)">
  <button class="search" onclick="searchItem()">Search</button>

  <p id="result" style="margin-top:15px;color:green"></p>

  <button class="logout" onclick="logout()">Logout</button>
</div>

</body>
</html>
