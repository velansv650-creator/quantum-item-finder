<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quantum Item Finder</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<style>
body{
  margin:0;
  font-family:"Segoe UI",sans-serif;
  background:linear-gradient(135deg,#1e3c72,#2a5298);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}
.card{
  background:#fff;
  width:95%;
  max-width:430px;
  border-radius:16px;
  padding:20px;
  box-shadow:0 15px 40px rgba(0,0,0,.3);
}
h2{text-align:center}
select,input,button{
  width:100%;
  padding:12px;
  margin-top:10px;
  border-radius:10px;
  border:1px solid #ccc;
  font-size:15px;
}
button{border:none;cursor:pointer}
.primary{background:#3f6ae1;color:#fff}
.green{background:#2e7d32;color:#fff}
.gray{background:#eee}
.shop{
  background:#f7f7f7;
  padding:12px;
  border-radius:12px;
  margin-top:15px
}
.center{text-align:center}
</style>
</head>

<body>
<div class="card">

<!-- LOGIN -->
<div id="login">
<h2>üîê Login / Signup</h2>
<input id="email" placeholder="Email">
<input id="password" type="password" placeholder="Password">
<button class="primary" onclick="login()">Continue</button>
</div>

<!-- APP -->
<div id="app" style="display:none">
<h2>üîç Item Search</h2>

<select id="category" onchange="loadItems()">
<option value="">Select Category</option>
<option>Grocery</option>
<option>Medical</option>
<option>Electronics</option>
<option>Stationery</option>
<option>Bakery</option>
<option>Dairy</option>
<option>Hardware</option>
</select>

<select id="item">
<option value="">Select Item</option>
</select>

<select id="area">
<option>Velachery</option><option>Adyar</option><option>T Nagar</option>
<option>Guindy</option><option>Anna Nagar</option><option>Tambaram</option>
<option>Chromepet</option><option>Pallavaram</option><option>Medavakkam</option>
<option>Sholinganallur</option><option>OMR</option><option>ECR</option>
<option>Perungudi</option><option>Porur</option><option>Ambattur</option>
<option>Avadi</option><option>Madipakkam</option><option>Nanganallur</option>
<option>Triplicane</option><option>Mylapore</option><option>Royapettah</option>
<option>Vadapalani</option><option>Kodambakkam</option>
<option>Perambur</option><option>Kolathur</option>
<option>Redhills</option><option>Poonamallee</option>
<option>Thiruvallur</option><option>Sriperumbudur</option>
<option>Oragadam</option><option>Guduvanchery</option>
<option>Urapakkam</option><option>Vandalur</option>
<option>Kelambakkam</option><option>Chengalpattu</option>
</select>

<button class="primary" onclick="nearMe()">üìç Near Me</button>
<button class="primary" onclick="search()">Search</button>
<button class="gray" onclick="logout()">Logout</button>

<div id="result"></div>
</div>
</div>

<script>
/* ---------- DATA ---------- */
const itemsData={
Grocery:["Rice","Wheat","Sugar","Salt","Oil","Dal","Flour","Spices","Biscuits"],
Medical:["Paracetamol","Crocin","Vicks","ORS","Thermometer","Bandage","Dettol"],
Electronics:["Mobile","Charger","Power Bank","Earphones","Extension Box"],
Stationery:["Pen","Pencil","Notebook","Bag","Marker","Eraser"],
Bakery:["Bread","Cake","Buns","Cookies"],
Dairy:["Milk","Curd","Butter","Cheese"],
Hardware:["Hammer","Screwdriver","Nails","Drill","Pipe"]
};

/* ---------- LOGIN ---------- */
function login(){
  if(!email.value || !password.value){
    alert("Enter email & password");
    return;
  }
  localStorage.setItem("user",email.value);
  document.getElementById("login").style.display="none";
  document.getElementById("app").style.display="block";
}

function logout(){
  localStorage.clear();
  location.reload();
}

if(localStorage.getItem("user")){
  document.getElementById("login").style.display="none";
  document.getElementById("app").style.display="block";
}

/* ---------- ITEMS ---------- */
function loadItems(){
  item.innerHTML="<option value=''>Select Item</option>";
  (itemsData[category.value]||[]).forEach(i=>{
    item.innerHTML+=`<option>${i}</option>`;
  });
}

let booking={};

/* ---------- SEARCH ---------- */
function search(){
  if(!category.value || !item.value){
    alert("Select category & item");
    return;
  }

  booking={
    id:"BOOK"+Date.now(),
    item:item.value,
    area:area.value
  };

  result.innerHTML=`
  <div class="shop">
    <b>Shop:</b> Local Verified Store<br>
    <b>Item:</b> ${booking.item}<br>
    <b>Area:</b> ${booking.area}<br><br>

    <button class="primary" onclick="preBook()">Pre-Book</button>
    <button class="green" onclick="callShop()">üìû Call</button>
    <button class="green" onclick="wa()">üí¨ WhatsApp</button>
    <button class="green" onclick="openMap()">üìç Map</button>

    <div id="qr" class="center"></div>
  </div>`;
}

/* ---------- PRE BOOK ---------- */
function preBook(){
  alert("Booking Confirmed: "+booking.id);
  const qrDiv=document.getElementById("qr");
  qrDiv.innerHTML="";
  new QRCode(qrDiv,{
    text:JSON.stringify(booking),
    width:160,
    height:160
  });
}

/* ---------- ACTIONS ---------- */
function callShop(){
  location.href="tel:+919876543210";
}
function wa(){
  const msg=`Booking ${booking.id} - ${booking.item} (${booking.area})`;
  window.open(`https://wa.me/919876543210?text=${encodeURIComponent(msg)}`);
}
function openMap(){
  window.open(`https://www.google.com/maps/search/${booking.area}+shop`);
}
function nearMe(){
  area.value="Velachery";
  alert("üìç Near Me detected: Velachery");
}
</script>
</body>
</html>
