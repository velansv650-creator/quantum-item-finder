<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quantum Item Finder</title>

<!-- QR -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<style>
body{
  margin:0;
  font-family: "Segoe UI", sans-serif;
  background: linear-gradient(135deg,#1e3c72,#2a5298);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}
.card{
  background:#fff;
  width:90%;
  max-width:420px;
  border-radius:16px;
  padding:20px;
  box-shadow:0 15px 40px rgba(0,0,0,.3);
}
h2{text-align:center;margin-bottom:15px}
select,input,button{
  width:100%;
  padding:12px;
  margin-top:10px;
  border-radius:10px;
  border:1px solid #ccc;
  font-size:15px;
}
button{
  border:none;
  cursor:pointer;
}
.primary{background:#3f6ae1;color:#fff}
.green{background:#2e7d32;color:#fff}
.red{background:#c62828;color:#fff}
.gray{background:#eee}
.hidden{display:none}
.shop{
  margin-top:15px;
  padding:12px;
  border-radius:12px;
  background:#f7f7f7;
}
.center{text-align:center}
</style>
</head>

<body>

<div class="card" id="app">

<!-- LOGIN -->
<div id="login">
<h2>üîê Login / Signup</h2>
<input id="email" placeholder="Email">
<input id="pass" type="password" placeholder="Password">
<button class="primary" onclick="login()">Login / Signup</button>
</div>

<!-- SEARCH -->
<div id="search" class="hidden">
<h2>üîç Item Search</h2>

<select id="category">
<option>Grocery</option>
<option>Vegetables</option>
<option>Fruits</option>
<option>Medical</option>
<option>Stationery</option>
<option>Electronics</option>
<option>Bakery</option>
<option>Dairy</option>
</select>

<input id="item" placeholder="Item name (Rice / Tablet / Pen)">

<select id="area">
<option>Velachery</option>
<option>T Nagar</option>
<option>Tambaram</option>
<option>Anna Nagar</option>
<option>Adyar</option>
<option>Porur</option>
<option>OMR</option>
<option>Perungudi</option>
<option>Chromepet</option>
<option>Ambattur</option>
<option>Poonamallee</option>
<option>Avadi</option>
</select>

<button class="primary" onclick="search()">Search</button>
<button class="gray" onclick="logout()">Logout</button>

<div id="result"></div>
</div>

</div>

<script>
let currentBooking=null;

function login(){
  localStorage.setItem("user","ok");
  document.getElementById("login").classList.add("hidden");
  document.getElementById("search").classList.remove("hidden");
}

function logout(){
  localStorage.clear();
  location.reload();
}

if(localStorage.getItem("user")){
  login();
}

function search(){
  const cat=category.value;
  const itemName=item.value || "Item";
  const areaName=area.value;

  const shop={
    name:"Local Verified Store",
    phone:"+919876543210",
    map:`https://www.google.com/maps/search/${areaName}+shop`
  };

  currentBooking={
    id:"BOOK-"+Math.floor(Math.random()*100000),
    item:itemName,
    area:areaName,
    shop:shop.name
  };

  result.innerHTML=`
  <div class="shop">
    <b>Shop:</b> ${shop.name}<br>
    <b>Category:</b> ${cat}<br>
    <b>Item:</b> ${itemName}<br>
    <b>Area:</b> ${areaName}<br><br>

    <button class="primary" onclick="preBook()">Pre-Book</button>
    <button class="green" onclick="callShop()">üìû Call</button>
    <button class="green" onclick="whatsapp()">üí¨ WhatsApp</button>
    <button class="green" onclick="openMap()">üìç Map</button>

    <div id="qr" class="center"></div>
  </div>
  `;
}

function preBook(){
  alert("Booking Confirmed\nID: "+currentBooking.id);
  document.getElementById("qr").innerHTML="";
  new QRCode("qr",{
    text: JSON.stringify(currentBooking),
    width:160,
    height:160
  });
}

function callShop(){
  window.location.href="tel:+919876543210";
}

function whatsapp(){
  const msg=`Booking ID: ${currentBooking.id}%0AItem: ${currentBooking.item}%0AArea: ${currentBooking.area}`;
  window.open(`https://wa.me/919876543210?text=${msg}`);
}

function openMap(){
  window.open(`https://www.google.com/maps/search/${currentBooking.area}+shop`);
}
</script>

</body>
</html>
