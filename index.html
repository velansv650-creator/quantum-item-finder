<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quantum Item Finder</title>

<style>
body{
  margin:0;font-family:Arial,sans-serif;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  min-height:100vh;display:flex;align-items:center;justify-content:center;
}
.card{
  background:#fff;color:#000;padding:22px;width:360px;
  border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.35);
}
h2{text-align:center;margin:6px 0 14px;}
input,select,button{
  width:100%;padding:10px;margin-top:10px;border-radius:6px;
  border:1px solid #ccc;font-size:14px;
}
button{background:#3949ab;color:#fff;border:none;font-weight:bold;cursor:pointer;}
button.logout{background:#e53935;}
#app{display:none;}
#result{margin-top:10px;font-weight:bold;}
.small{font-size:12px;color:#555;text-align:center;margin-top:6px;}
</style>
</head>

<body>

<!-- LOGIN / SIGNUP -->
<div class="card" id="loginBox">
  <h2>üîê Login / Signup</h2>
  <input id="email" type="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password (min 6 chars)">
  <button onclick="login()">Login</button>
  <button onclick="signup()">Signup</button>
  <div class="small">First time ‚Üí Signup. Next ‚Üí Login.</div>
</div>

<!-- APP / SEARCH -->
<div class="card" id="app">
  <h2>üîç Item Search</h2>

  <select id="category"></select>
  <input id="item" placeholder="Item name (Rice, Pen, Tablet)">
  <select id="area"></select>

  <button onclick="search()">Search</button>
  <div id="result"></div>

  <button class="logout" onclick="logout()">Logout</button>
</div>

<script type="module">
/* ================= FIREBASE ================= */
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import {
  getAuth,
  signInWithEmailAndPassword,
  createUserWithEmailAndPassword,
  onAuthStateChanged,
  signOut
} from "https://www.gstatic.com/firebasejs/12.7.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyCE21rVu1qcMtjnUhPmNHtef-GfqofnZf0",
  authDomain: "quantum-item-finder-4a990.firebaseapp.com",
  projectId: "quantum-item-finder-4a990",
  storageBucket: "quantum-item-finder-4a990.firebasestorage.app",
  messagingSenderId: "500012758966",
  appId: "1:500012758966:web:a63d60c776f6da1a9ff317"
};

const appFB = initializeApp(firebaseConfig);
const auth = getAuth(appFB);

/* ================= DATA ================= */
// MANY CHENNAI AREAS
const chennaiAreas = [
 "Select Area","T Nagar","Anna Nagar","Velachery","Adyar","Guindy","Saidapet",
 "Tambaram","Chromepet","Pallavaram","Perungudi","Thiruvanmiyur","Mylapore",
 "Triplicane","Royapettah","Kodambakkam","Ashok Nagar","KK Nagar","Egmore",
 "Nungambakkam","Kilpauk","Porur","Ambattur","Avadi","Madipakkam",
 "Pallikaranai","Sholinganallur","OMR","ECR","Besant Nagar",
 "Washermanpet","Tondiarpet","Perambur","Kolathur","Madhavaram",
 "Red Hills","Poonamallee","Mogappair","Ayanavaram","Villivakkam",
 "Thoraipakkam","Navalur","Siruseri","Urapakkam","Guduvanchery"
];

// CATEGORIES + DEMO ITEMS (nee ketta ellamey cover)
const categories = {
  "Select Category": [],
  "Grocery": ["Rice","Wheat","Sugar","Oil","Salt","Milk","Eggs","Dal","Spices"],
  "Stationery": ["Pen","Pencil","Notebook","Eraser","Scale","Marker","File"],
  "Medical": ["Paracetamol","Vitamin C","ORS","Thermometer","Bandage"],
  "Hospital": ["OPD","Emergency","Pharmacy","Lab","Scan"],
  "Electronics": ["Mobile","Charger","Headset","Power Bank","USB Cable"],
  "Hardware": ["Hammer","Screwdriver","Drill","Nails","Wrench"],
  "Mechanic": ["Bike Service","Car Service","Oil Change","Brake Check"],
  "Bakery": ["Bread","Cake","Bun","Cookies"],
  "Hotel": ["Meals","Biryani","Dosa","Idli"],
  "Vegetable": ["Tomato","Onion","Potato","Carrot","Beans"]
};

/* ================= POPULATE DROPDOWNS ================= */
const areaSelect = document.getElementById("area");
chennaiAreas.forEach(a=>{
  const o=document.createElement("option"); o.value=a; o.textContent=a;
  areaSelect.appendChild(o);
});

const catSelect = document.getElementById("category");
Object.keys(categories).forEach(c=>{
  const o=document.createElement("option"); o.value=c; o.textContent=c;
  catSelect.appendChild(o);
});

/* ================= AUTH STATE ================= */
onAuthStateChanged(auth, user=>{
  document.getElementById("loginBox").style.display = user ? "none":"block";
  document.getElementById("app").style.display      = user ? "block":"none";
});

/* ================= LOGIN / SIGNUP ================= */
window.login = ()=>{
  signInWithEmailAndPassword(auth,email.value,password.value)
    .catch(e=>alert(e.message));
};
window.signup = ()=>{
  createUserWithEmailAndPassword(auth,email.value,password.value)
    .catch(e=>alert(e.message));
};
window.logout = ()=> signOut(auth);

/* ================= SEARCH (DEMO LOGIC) ================= */
window.search = ()=>{
  const cat = catSelect.value;
  const item = document.getElementById("item").value.trim();
  const area = areaSelect.value;
  const res  = document.getElementById("result");

  if(cat==="Select Category" || area==="Select Area" || !item){
    res.innerText = "‚ùå Category, Item & Area select pannunga";
    return;
  }

  const items = categories[cat] || [];
  const found = items.map(x=>x.toLowerCase()).includes(item.toLowerCase());

  res.innerText = found
    ? `‚úÖ "${item}" found in ${area} (${cat}) ‚Äì demo`
    : `‚ÑπÔ∏è "${item}" not in demo list for ${cat}, but available in ${area} (demo)`;
};
</script>

</body>
</html>
