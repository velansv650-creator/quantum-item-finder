<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Quantum Item Finder</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>

<style>
body{
 margin:0;
 font-family:Poppins,sans-serif;
 background:linear-gradient(135deg,#0F2027,#203A43,#2C5364);
 color:#000;
}
.card{
 max-width:420px;
 margin:20px auto;
 background:#fff;
 padding:20px;
 border-radius:20px;
 box-shadow:0 25px 50px rgba(0,0,0,.4);
}
h2{text-align:center;color:#0F2027;}
.user{text-align:center;font-size:14px;margin-bottom:10px;color:#444;}
input,select{
 width:100%;
 padding:14px;
 margin-bottom:12px;
 border-radius:12px;
 border:1px solid #ccc;
 font-size:14px;
}
button{
 width:100%;
 padding:14px;
 border:none;
 border-radius:14px;
 font-weight:600;
 margin-bottom:10px;
 cursor:pointer;
}
.primary{background:linear-gradient(135deg,#1D976C,#93F9B9);}
.search{background:linear-gradient(135deg,#396afc,#2948ff);color:#fff;}
.logout{background:#b71c1c;color:#fff;}
.shop{
 background:#f4f6f8;
 padding:14px;
 border-radius:14px;
 margin-top:12px;
 border-left:6px solid #1D976C;
}
.shop b{color:#1D976C;}
.actions{
 display:flex;
 justify-content:space-between;
 margin-top:10px;
}
.actions button{
 width:32%;
 padding:10px;
 font-size:13px;
 border-radius:10px;
}
.hide{display:none;}
small{color:#555;}
</style>
</head>

<body>

<!-- LOGIN -->
<div class="card" id="loginBox">
<h2>ğŸ” Login / Signup</h2>
<input id="email" placeholder="Email">
<input id="password" type="password" placeholder="Password">
<button class="primary" onclick="signup()">Signup</button>
<button class="search" onclick="login()">Login</button>
<div id="msg"></div>
</div>

<!-- APP -->
<div class="card hide" id="appBox">
<h2>ğŸ‘‘ Quantum Item Finder</h2>
<div class="user" id="userEmail"></div>
<small id="locationTxt">ğŸ“ Detecting locationâ€¦</small>

<select id="area">
<option value="">Any Area (Auto)</option>
<option>Anna Nagar</option>
<option>T Nagar</option>
<option>Velachery</option>
<option>Adyar</option>
<option>Tambaram</option>
<option>OMR</option>
<option>Porur</option>
<option>Guindy</option>
</select>

<input id="item" placeholder="Search item (rice, charger, tabletâ€¦)">
<button class="search" onclick="searchItem()">Search</button>

<div id="result"></div>

<button class="logout" onclick="logout()">Logout</button>
</div>

<script>
// ğŸ”¥ FIREBASE
firebase.initializeApp({
 apiKey:"AIzaSyCCMTtL8uO4apuVk-Ut-LzPWCMOtQgoAvE",
 authDomain:"quantum-item-finder.firebaseapp.com"
});
const auth=firebase.auth();

// AUTH
function signup(){
 auth.createUserWithEmailAndPassword(email.value,password.value)
 .catch(e=>msg.innerHTML=e.message);
}
function login(){
 auth.signInWithEmailAndPassword(email.value,password.value)
 .catch(e=>msg.innerHTML=e.message);
}
function logout(){auth.signOut();}

auth.onAuthStateChanged(u=>{
 if(u){
  loginBox.classList.add("hide");
  appBox.classList.remove("hide");
  userEmail.innerText="User: "+u.email;
  detectLocation();
 }else{
  loginBox.classList.remove("hide");
  appBox.classList.add("hide");
 }
});

// ğŸŒ AUTO LOCATION (CHENNAI SAFE)
function detectLocation(){
 if(navigator.geolocation){
  navigator.geolocation.getCurrentPosition(pos=>{
   locationTxt.innerText="ğŸ“ Location detected (Chennai)";
  },()=>{
   locationTxt.innerText="ğŸ“ Location permission denied";
  });
 }else{
  locationTxt.innerText="ğŸ“ Location not supported";
 }
}

// ğŸª UNIVERSAL SHOP ENGINE (NO BREAK)
function searchItem(){
 let itemName=item.value.toLowerCase().trim();
 let areaName=area.value || "Nearby Area";

 if(!itemName){
  result.innerHTML="âŒ Enter item name";
  return;
 }

 result.innerHTML=`
 <div class="shop">
  <b>${itemName.toUpperCase()} available</b><br>
  ğŸ“ ${areaName}, Chennai
  <div class="actions">
   <button onclick="window.open('https://maps.google.com')">ğŸ—º Map</button>
   <button onclick="alert('Calling nearby shopâ€¦')">ğŸ“ Call</button>
   <button onclick="alert('Pre-booking successful')">ğŸ“¦ Book</button>
  </div>
 </div>`;
}
</script>

</body>
</html>
